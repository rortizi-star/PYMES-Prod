import{a as D}from"./chunk-LJGPJDTJ.js";import{a as ct,b as dt,c as ut,d as st,e as pt,f as ft,g as _t,h as Ct,i as vt,j as ht,k as xt,l as St,m as gt}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as nt,b as ot,e as rt,f as at,g as mt,h as lt}from"./chunk-ZMTNKF2C.js";import{a as z,b as h,d as J,e as K,h as Q,i as U,j as W,k as X,m as Y,n as Z,o as tt,q as et,r as b,s as it,t as I}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as A,b as M}from"./chunk-M4UNVSQS.js";import{a as y,b as T,e as w}from"./chunk-KT3WS7J5.js";import{ba as B,g as j,i as E}from"./chunk-HS7PEKAI.js";import{Bb as v,Db as x,Lb as n,Mb as s,Nb as G,Ra as l,Sa as p,Sb as g,ga as S,hb as d,jb as c,oa as F,pa as N,sb as i,tb as e,ub as f,uc as H,vb as _,wb as C,yb as P,zc as $}from"./chunk-Y5R3IJQL.js";import{a as k}from"./chunk-CWTPBX7D.js";function wt(t,a){t&1&&(i(0,"th",14),n(1,"C\xF3digo"),e())}function Dt(t,a){if(t&1&&(i(0,"td",15),n(1),e()),t&2){let o=a.$implicit;l(),s(o.code)}}function Ft(t,a){t&1&&(i(0,"th",14),n(1,"Nombre"),e())}function Nt(t,a){if(t&1&&(i(0,"td",15),n(1),e()),t&2){let o=a.$implicit;l(),s(o.name)}}function Rt(t,a){t&1&&(i(0,"th",14),n(1,"Tipo"),e())}function Lt(t,a){if(t&1&&(i(0,"td",15),n(1),e()),t&2){let o=a.$implicit;l(),s(o.type)}}function qt(t,a){t&1&&(i(0,"th",14),n(1,"Nivel"),e())}function Ot(t,a){if(t&1&&(i(0,"td",15),n(1),e()),t&2){let o=a.$implicit;l(),s(o.level)}}function Vt(t,a){t&1&&(i(0,"th",14),n(1,"Activo"),e())}function kt(t,a){if(t&1&&(i(0,"td",15)(1,"mat-icon",16),n(2),e()()),t&2){let o=a.$implicit;l(2),s(o.isActive?"check_circle":"cancel")}}function Pt(t,a){t&1&&(i(0,"th",14),n(1,"Acciones"),e())}function Gt(t,a){if(t&1){let o=P();i(0,"td",15)(1,"button",17),v("click",function(){let r=F(o).$implicit,u=x();return N(u.editAccount(r))}),i(2,"mat-icon"),n(3,"edit"),e()(),i(4,"button",18),v("click",function(){let r=F(o).$implicit,u=x();return N(u.deleteAccount(r))}),i(5,"mat-icon"),n(6,"delete"),e()()()}}function Ht(t,a){t&1&&f(0,"tr",19)}function $t(t,a){t&1&&f(0,"tr",20)}var Et=(()=>{class t{constructor(o,m){this.accountService=o,this.router=m,this.accounts=[],this.displayedColumns=["code","name","type","level","isActive","actions"]}ngOnInit(){this.loadAccounts()}loadAccounts(){this.accountService.getAccounts().subscribe(o=>this.accounts=o)}addAccount(){this.router.navigate(["accounts","new"])}editAccount(o){this.router.navigate(["accounts",o.id,"edit"])}deleteAccount(o){confirm("\xBFSeguro que deseas eliminar esta cuenta?")&&this.accountService.deleteAccount(o.id).subscribe(()=>this.loadAccounts())}static{this.\u0275fac=function(m){return new(m||t)(p(D),p(E))}}static{this.\u0275cmp=S({type:t,selectors:[["app-account-list"]],standalone:!0,features:[g],decls:32,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","level"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(m,r){m&1&&(i(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),n(3,"account_balance"),e(),n(4," Cuentas Contables "),f(5,"span",0),i(6,"button",1),v("click",function(){return r.addAccount()}),i(7,"mat-icon"),n(8,"add"),e(),n(9," Nueva "),e()(),i(10,"div",2)(11,"table",3),_(12,4),d(13,wt,2,0,"th",5)(14,Dt,2,1,"td",6),C(),_(15,7),d(16,Ft,2,0,"th",5)(17,Nt,2,1,"td",6),C(),_(18,8),d(19,Rt,2,0,"th",5)(20,Lt,2,1,"td",6),C(),_(21,9),d(22,qt,2,0,"th",5)(23,Ot,2,1,"td",6),C(),_(24,10),d(25,Vt,2,0,"th",5)(26,kt,3,1,"td",6),C(),_(27,11),d(28,Pt,2,0,"th",5)(29,Gt,7,0,"td",6),C(),d(30,Ht,1,0,"tr",12)(31,$t,1,0,"tr",13),e()()()),m&2&&(l(11),c("dataSource",r.accounts),l(19),c("matHeaderRowDef",r.displayedColumns),l(),c("matRowDefColumns",r.displayedColumns))},dependencies:[xt,ct,ut,_t,st,dt,Ct,pt,ft,vt,ht,w,y,T,M,A,I,b,it],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return t})();function jt(t,a){t&1&&(i(0,"mat-error"),n(1,"Requerido"),e())}function Bt(t,a){t&1&&(i(0,"mat-error"),n(1,"Requerido"),e())}function zt(t,a){t&1&&(i(0,"mat-error"),n(1,"Requerido"),e())}function Jt(t,a){t&1&&(i(0,"mat-error"),n(1,"Requerido"),e())}function Kt(t,a){t&1&&(i(0,"mat-error"),n(1,"Debe ser mayor o igual a 1"),e())}function Qt(t,a){if(t&1&&(i(0,"mat-error"),n(1),e()),t&2){let o=x();l(),s(o.error)}}var R=(()=>{class t{constructor(o,m,r,u){this.fb=o,this.accountService=m,this.route=r,this.router=u,this.isEdit=!1,this.accountId=null,this.loading=!1,this.error=null,this.form=this.fb.group({code:["",[h.required]],name:["",[h.required]],type:["",[h.required]],level:[1,[h.required,h.min(1)]],isActive:[!0]})}ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o?(this.isEdit=!0,this.accountId=+o,this.loading=!0,this.accountService.getAccount(this.accountId).subscribe({next:m=>{this.form.patchValue({code:m.code,name:m.name,type:m.type,level:m.level,isActive:m.isActive}),this.loading=!1},error:m=>{this.error="No se pudo cargar la cuenta",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let o=k({},this.form.value);this.isEdit&&this.accountId?this.accountService.updateAccount(this.accountId,o).subscribe({next:()=>this.router.navigate(["/accounts"]),error:m=>{this.error="Error al actualizar cuenta",this.loading=!1}}):this.accountService.createAccount(o).subscribe({next:()=>this.router.navigate(["/accounts"]),error:m=>{this.error="Error al crear cuenta",this.loading=!1}})}cancel(){this.router.navigate(["/accounts"])}static{this.\u0275fac=function(m){return new(m||t)(p(tt),p(D),p(j),p(E))}}static{this.\u0275cmp=S({type:t,selectors:[["app-account-form"]],standalone:!0,features:[g],decls:53,vars:13,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","code","required",""],[4,"ngIf"],["matInput","","formControlName","name","required",""],["formControlName","type","required",""],["value","ACTIVO"],["value","PASIVO"],["value","PATRIMONIO"],["value","INGRESO"],["value","EGRESO"],["matInput","","formControlName","level","type","number","required","","min","1"],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(m,r){if(m&1&&(i(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),n(3),e(),n(4),e(),i(5,"form",0),v("ngSubmit",function(){return r.save()}),i(6,"mat-form-field",1)(7,"mat-label"),n(8,"C\xF3digo"),e(),f(9,"input",2),d(10,jt,2,0,"mat-error",3),e(),i(11,"mat-form-field",1)(12,"mat-label"),n(13,"Nombre"),e(),f(14,"input",4),d(15,Bt,2,0,"mat-error",3),e(),i(16,"mat-form-field",1)(17,"mat-label"),n(18,"Tipo"),e(),i(19,"mat-select",5)(20,"mat-option",6),n(21,"Activo"),e(),i(22,"mat-option",7),n(23,"Pasivo"),e(),i(24,"mat-option",8),n(25,"Patrimonio"),e(),i(26,"mat-option",9),n(27,"Ingreso"),e(),i(28,"mat-option",10),n(29,"Egreso"),e()(),d(30,zt,2,0,"mat-error",3),e(),i(31,"mat-form-field",1)(32,"mat-label"),n(33,"Nivel"),e(),f(34,"input",11),d(35,Jt,2,0,"mat-error",3)(36,Kt,2,0,"mat-error",3),e(),i(37,"mat-form-field",1)(38,"mat-label"),n(39,"Activo"),e(),i(40,"mat-select",12)(41,"mat-option",13),n(42,"S\xED"),e(),i(43,"mat-option",13),n(44,"No"),e()()(),i(45,"div",14)(46,"button",15)(47,"mat-icon"),n(48,"save"),e(),n(49," Guardar "),e(),i(50,"button",16),v("click",function(){return r.cancel()}),n(51,"Cancelar"),e()(),d(52,Qt,2,1,"mat-error",3),e()()),m&2){let u,L,q,O,V;l(3),s(r.isEdit?"edit":"add"),l(),G(" ",r.isEdit?"Editar cuenta":"Nueva cuenta"," "),l(),c("formGroup",r.form),l(5),c("ngIf",(u=r.form.get("code"))==null?null:u.hasError("required")),l(5),c("ngIf",(L=r.form.get("name"))==null?null:L.hasError("required")),l(15),c("ngIf",(q=r.form.get("type"))==null?null:q.hasError("required")),l(5),c("ngIf",(O=r.form.get("level"))==null?null:O.hasError("required")),l(),c("ngIf",(V=r.form.get("level"))==null?null:V.hasError("min")),l(5),c("value",!0),l(2),c("value",!1),l(3),c("disabled",r.form.invalid||r.loading),l(4),c("disabled",r.loading),l(2),c("ngIf",r.error)}},dependencies:[$,H,et,Q,z,U,J,K,Z,Y,W,X,w,y,T,at,rt,nt,ot,lt,mt,I,b,M,A,gt,St,B],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return t})();var xe=[{path:"",component:Et},{path:"new",component:R},{path:":id/edit",component:R}];export{xe as accountsRoutes};
