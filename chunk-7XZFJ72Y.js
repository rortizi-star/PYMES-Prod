import{a as F}from"./chunk-RAJMQ3CN.js";import{a as me,b as ae,c as le,d as se,e as ce,f as ue,g as de,h as pe,i as fe,j as Ce,k as _e,l as he,m as ve}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as ee,b as te,e as ie,f as re,g as oe,h as ne}from"./chunk-ZMTNKF2C.js";import{a as G,b as g,d as z,e as J,h as K,j as Q,k as U,n as W,o as X,q as Y,r as I,s as Z,t as y}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as S,b}from"./chunk-M4UNVSQS.js";import{a as w,b as T,e as D}from"./chunk-KT3WS7J5.js";import{ba as $,g as B,i as M}from"./chunk-HS7PEKAI.js";import{Bb as C,Db as v,Lb as r,Mb as f,Nb as P,Ra as a,Sa as d,Sb as E,ga as x,hb as c,jb as s,oa as L,pa as R,sb as i,tb as t,ub as p,uc as H,vb as _,wb as h,yb as V,zc as j}from"./chunk-Y5R3IJQL.js";import{a as O}from"./chunk-CWTPBX7D.js";function ye(e,l){e&1&&(i(0,"th",13),r(1,"Nombre"),t())}function we(e,l){if(e&1&&(i(0,"td",14),r(1),t()),e&2){let o=l.$implicit;a(),f(o.name)}}function Te(e,l){e&1&&(i(0,"th",13),r(1,"Email"),t())}function De(e,l){if(e&1&&(i(0,"td",14),r(1),t()),e&2){let o=l.$implicit;a(),f(o.email)}}function Fe(e,l){e&1&&(i(0,"th",13),r(1,"Tel\xE9fono"),t())}function Le(e,l){if(e&1&&(i(0,"td",14),r(1),t()),e&2){let o=l.$implicit;a(),f(o.phone)}}function Re(e,l){e&1&&(i(0,"th",13),r(1,"Activo"),t())}function Ne(e,l){if(e&1&&(i(0,"td",14)(1,"mat-icon",15),r(2),t()()),e&2){let o=l.$implicit;a(2),f(o.isActive?"check_circle":"cancel")}}function qe(e,l){e&1&&(i(0,"th",13),r(1,"Acciones"),t())}function ke(e,l){if(e&1){let o=V();i(0,"td",14)(1,"button",16),C("click",function(){let n=L(o).$implicit,u=v();return R(u.editCustomer(n))}),i(2,"mat-icon"),r(3,"edit"),t()(),i(4,"button",17),C("click",function(){let n=L(o).$implicit,u=v();return R(u.deleteCustomer(n))}),i(5,"mat-icon"),r(6,"delete"),t()()()}}function Ae(e,l){e&1&&p(0,"tr",18)}function Oe(e,l){e&1&&p(0,"tr",19)}var ge=(()=>{class e{constructor(o,m){this.customerService=o,this.router=m,this.customers=[],this.displayedColumns=["name","email","phone","isActive","actions"]}ngOnInit(){this.loadCustomers()}loadCustomers(){this.customerService.getCustomers().subscribe(o=>this.customers=o)}addCustomer(){this.router.navigate(["customers","new"])}editCustomer(o){this.router.navigate(["customers",o.id,"edit"])}deleteCustomer(o){confirm("\xBFSeguro que deseas eliminar este cliente?")&&this.customerService.deleteCustomer(o.id).subscribe(()=>this.loadCustomers())}static{this.\u0275fac=function(m){return new(m||e)(d(F),d(M))}}static{this.\u0275cmp=x({type:e,selectors:[["app-customer-list"]],standalone:!0,features:[E],decls:29,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(m,n){m&1&&(i(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),r(3,"person"),t(),r(4," Clientes "),p(5,"span",0),i(6,"button",1),C("click",function(){return n.addCustomer()}),i(7,"mat-icon"),r(8,"person_add"),t(),r(9," Nuevo "),t()(),i(10,"div",2)(11,"table",3),_(12,4),c(13,ye,2,0,"th",5)(14,we,2,1,"td",6),h(),_(15,7),c(16,Te,2,0,"th",5)(17,De,2,1,"td",6),h(),_(18,8),c(19,Fe,2,0,"th",5)(20,Le,2,1,"td",6),h(),_(21,9),c(22,Re,2,0,"th",5)(23,Ne,3,1,"td",6),h(),_(24,10),c(25,qe,2,0,"th",5)(26,ke,7,0,"td",6),h(),c(27,Ae,1,0,"tr",11)(28,Oe,1,0,"tr",12),t()()()),m&2&&(a(11),s("dataSource",n.customers),a(16),s("matHeaderRowDef",n.displayedColumns),a(),s("matRowDefColumns",n.displayedColumns))},dependencies:[_e,me,le,de,se,ae,pe,ce,ue,fe,Ce,D,w,T,b,S,y,I,Z],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return e})();function Ve(e,l){e&1&&(i(0,"mat-error"),r(1,"Requerido"),t())}function Pe(e,l){e&1&&(i(0,"mat-error"),r(1,"Requerido"),t())}function He(e,l){e&1&&(i(0,"mat-error"),r(1,"Email inv\xE1lido"),t())}function je(e,l){e&1&&(i(0,"mat-error"),r(1,"Requerido"),t())}function Be(e,l){if(e&1&&(i(0,"mat-error"),r(1),t()),e&2){let o=v();a(),f(o.error)}}var N=(()=>{class e{constructor(o,m,n,u){this.fb=o,this.customerService=m,this.route=n,this.router=u,this.isEdit=!1,this.customerId=null,this.loading=!1,this.error=null,this.form=this.fb.group({name:["",[g.required]],email:["",[g.required,g.email]],phone:["",[g.required]],isActive:[!0]})}ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o?(this.isEdit=!0,this.customerId=+o,this.loading=!0,this.customerService.getCustomer(this.customerId).subscribe({next:m=>{this.form.patchValue({name:m.name,email:m.email,phone:m.phone,isActive:m.isActive}),this.loading=!1},error:m=>{this.error="No se pudo cargar el cliente",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let o=O({},this.form.value);this.isEdit&&this.customerId?this.customerService.updateCustomer(this.customerId,o).subscribe({next:()=>this.router.navigate(["/customers"]),error:m=>{this.error="Error al actualizar cliente",this.loading=!1}}):this.customerService.createCustomer(o).subscribe({next:()=>this.router.navigate(["/customers"]),error:m=>{this.error="Error al crear cliente",this.loading=!1}})}cancel(){this.router.navigate(["/customers"])}static{this.\u0275fac=function(m){return new(m||e)(d(X),d(F),d(B),d(M))}}static{this.\u0275cmp=x({type:e,selectors:[["app-customer-form"]],standalone:!0,features:[E],decls:38,vars:12,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","email","required",""],["matInput","","formControlName","phone","required",""],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(m,n){if(m&1&&(i(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),r(3),t(),r(4),t(),i(5,"form",0),C("ngSubmit",function(){return n.save()}),i(6,"mat-form-field",1)(7,"mat-label"),r(8,"Nombre"),t(),p(9,"input",2),c(10,Ve,2,0,"mat-error",3),t(),i(11,"mat-form-field",1)(12,"mat-label"),r(13,"Email"),t(),p(14,"input",4),c(15,Pe,2,0,"mat-error",3)(16,He,2,0,"mat-error",3),t(),i(17,"mat-form-field",1)(18,"mat-label"),r(19,"Tel\xE9fono"),t(),p(20,"input",5),c(21,je,2,0,"mat-error",3),t(),i(22,"mat-form-field",1)(23,"mat-label"),r(24,"Activo"),t(),i(25,"mat-select",6)(26,"mat-option",7),r(27,"S\xED"),t(),i(28,"mat-option",7),r(29,"No"),t()()(),i(30,"div",8)(31,"button",9)(32,"mat-icon"),r(33,"save"),t(),r(34," Guardar "),t(),i(35,"button",10),C("click",function(){return n.cancel()}),r(36,"Cancelar"),t()(),c(37,Be,2,1,"mat-error",3),t()()),m&2){let u,q,k,A;a(3),f(n.isEdit?"edit":"person_add"),a(),P(" ",n.isEdit?"Editar cliente":"Nuevo cliente"," "),a(),s("formGroup",n.form),a(5),s("ngIf",(u=n.form.get("name"))==null?null:u.hasError("required")),a(5),s("ngIf",(q=n.form.get("email"))==null?null:q.hasError("required")),a(),s("ngIf",(k=n.form.get("email"))==null?null:k.hasError("email")),a(5),s("ngIf",(A=n.form.get("phone"))==null?null:A.hasError("required")),a(5),s("value",!0),a(2),s("value",!1),a(3),s("disabled",n.form.invalid||n.loading),a(4),s("disabled",n.loading),a(2),s("ngIf",n.error)}},dependencies:[j,H,Y,K,G,z,J,W,Q,U,D,w,T,re,ie,ee,te,ne,oe,y,I,b,S,ve,he,$],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return e})();var pt=[{path:"",component:ge},{path:"new",component:N},{path:":id/edit",component:N}];export{pt as customersRoutes};
