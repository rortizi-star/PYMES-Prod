import{a as mt,b as lt,c as st,d as ct,e as dt,f as pt,g as ut,h as ft,i as ht,j as _t,k as bt,l as kt,m as Ct}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as et,b as it,e as nt,f as at,g as rt,h as ot}from"./chunk-ZMTNKF2C.js";import{a as G,b as F,d as z,e as J,h as K,j as Q,k as W,n as X,o as Y,q as Z,r as S,s as tt,t as B}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as M,b as x}from"./chunk-M4UNVSQS.js";import{a as E,b as I,e as y}from"./chunk-KT3WS7J5.js";import{a as P,ba as U,g as H,i as g}from"./chunk-HS7PEKAI.js";import{Bb as f,Db as k,Lb as a,Mb as h,Nb as q,Ra as m,Sa as p,Sb as v,X as A,aa as O,ga as C,hb as d,jb as s,oa as D,pa as T,sb as n,tb as i,ub as u,uc as V,vb as _,wb as b,yb as $,zc as j}from"./chunk-Y5R3IJQL.js";import{a as N}from"./chunk-CWTPBX7D.js";var w=(()=>{class t{constructor(e){this.http=e,this.apiUrl="http://localhost:8082/api/banks"}getBanks(){return this.http.get(this.apiUrl)}getBank(e){return this.http.get(`${this.apiUrl}/${e}`)}createBank(e){return this.http.post(this.apiUrl,e)}updateBank(e,r){return this.http.put(`${this.apiUrl}/${e}`,r)}deleteBank(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(r){return new(r||t)(O(P))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function It(t,l){t&1&&(n(0,"th",12),a(1,"Nombre"),i())}function yt(t,l){if(t&1&&(n(0,"td",13),a(1),i()),t&2){let e=l.$implicit;m(),h(e.name)}}function wt(t,l){t&1&&(n(0,"th",12),a(1,"C\xF3digo"),i())}function Dt(t,l){if(t&1&&(n(0,"td",13),a(1),i()),t&2){let e=l.$implicit;m(),h(e.code)}}function Tt(t,l){t&1&&(n(0,"th",12),a(1,"Activo"),i())}function Ft(t,l){if(t&1&&(n(0,"td",13)(1,"mat-icon",14),a(2),i()()),t&2){let e=l.$implicit;m(2),h(e.isActive?"check_circle":"cancel")}}function Lt(t,l){t&1&&(n(0,"th",12),a(1,"Acciones"),i())}function Rt(t,l){if(t&1){let e=$();n(0,"td",13)(1,"button",15),f("click",function(){let o=D(e).$implicit,c=k();return T(c.editBank(o))}),n(2,"mat-icon"),a(3,"edit"),i()(),n(4,"button",16),f("click",function(){let o=D(e).$implicit,c=k();return T(c.deleteBank(o))}),n(5,"mat-icon"),a(6,"delete"),i()()()}}function Nt(t,l){t&1&&u(0,"tr",17)}function At(t,l){t&1&&u(0,"tr",18)}var Mt=(()=>{class t{constructor(e,r){this.bankService=e,this.router=r,this.banks=[],this.displayedColumns=["name","code","isActive","actions"]}ngOnInit(){this.loadBanks()}loadBanks(){this.bankService.getBanks().subscribe(e=>this.banks=e)}addBank(){this.router.navigate(["banks","new"])}editBank(e){this.router.navigate(["banks",e.id,"edit"])}deleteBank(e){confirm("\xBFSeguro que deseas eliminar este banco?")&&this.bankService.deleteBank(e.id).subscribe(()=>this.loadBanks())}static{this.\u0275fac=function(r){return new(r||t)(p(w),p(g))}}static{this.\u0275cmp=C({type:t,selectors:[["app-bank-list"]],standalone:!0,features:[v],decls:26,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,o){r&1&&(n(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),a(3,"account_balance"),i(),a(4," Bancos "),u(5,"span",0),n(6,"button",1),f("click",function(){return o.addBank()}),n(7,"mat-icon"),a(8,"add"),i(),a(9," Nuevo "),i()(),n(10,"div",2)(11,"table",3),_(12,4),d(13,It,2,0,"th",5)(14,yt,2,1,"td",6),b(),_(15,7),d(16,wt,2,0,"th",5)(17,Dt,2,1,"td",6),b(),_(18,8),d(19,Tt,2,0,"th",5)(20,Ft,3,1,"td",6),b(),_(21,9),d(22,Lt,2,0,"th",5)(23,Rt,7,0,"td",6),b(),d(24,Nt,1,0,"tr",10)(25,At,1,0,"tr",11),i()()()),r&2&&(m(11),s("dataSource",o.banks),m(13),s("matHeaderRowDef",o.displayedColumns),m(),s("matRowDefColumns",o.displayedColumns))},dependencies:[bt,mt,st,ut,ct,lt,ft,dt,pt,ht,_t,y,E,I,x,M,B,S,tt],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return t})();function Ot(t,l){t&1&&(n(0,"mat-error"),a(1,"Requerido"),i())}function $t(t,l){t&1&&(n(0,"mat-error"),a(1,"Requerido"),i())}function qt(t,l){if(t&1&&(n(0,"mat-error"),a(1),i()),t&2){let e=k();m(),h(e.error)}}var L=(()=>{class t{constructor(e,r,o,c){this.fb=e,this.bankService=r,this.route=o,this.router=c,this.isEdit=!1,this.bankId=null,this.loading=!1,this.error=null,this.form=this.fb.group({name:["",[F.required]],code:["",[F.required]],isActive:[!0]})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isEdit=!0,this.bankId=+e,this.loading=!0,this.bankService.getBank(this.bankId).subscribe({next:r=>{this.form.patchValue({name:r.name,code:r.code,isActive:r.isActive}),this.loading=!1},error:r=>{this.error="No se pudo cargar el banco",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let e=N({},this.form.value);this.isEdit&&this.bankId?this.bankService.updateBank(this.bankId,e).subscribe({next:()=>this.router.navigate(["/banks"]),error:r=>{this.error="Error al actualizar banco",this.loading=!1}}):this.bankService.createBank(e).subscribe({next:()=>this.router.navigate(["/banks"]),error:r=>{this.error="Error al crear banco",this.loading=!1}})}cancel(){this.router.navigate(["/banks"])}static{this.\u0275fac=function(r){return new(r||t)(p(Y),p(w),p(H),p(g))}}static{this.\u0275cmp=C({type:t,selectors:[["app-bank-form"]],standalone:!0,features:[v],decls:32,vars:10,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","code","required",""],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(r,o){if(r&1&&(n(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),a(3),i(),a(4),i(),n(5,"form",0),f("ngSubmit",function(){return o.save()}),n(6,"mat-form-field",1)(7,"mat-label"),a(8,"Nombre"),i(),u(9,"input",2),d(10,Ot,2,0,"mat-error",3),i(),n(11,"mat-form-field",1)(12,"mat-label"),a(13,"C\xF3digo"),i(),u(14,"input",4),d(15,$t,2,0,"mat-error",3),i(),n(16,"mat-form-field",1)(17,"mat-label"),a(18,"Activo"),i(),n(19,"mat-select",5)(20,"mat-option",6),a(21,"S\xED"),i(),n(22,"mat-option",6),a(23,"No"),i()()(),n(24,"div",7)(25,"button",8)(26,"mat-icon"),a(27,"save"),i(),a(28," Guardar "),i(),n(29,"button",9),f("click",function(){return o.cancel()}),a(30,"Cancelar"),i()(),d(31,qt,2,1,"mat-error",3),i()()),r&2){let c,R;m(3),h(o.isEdit?"edit":"add"),m(),q(" ",o.isEdit?"Editar banco":"Nuevo banco"," "),m(),s("formGroup",o.form),m(5),s("ngIf",(c=o.form.get("name"))==null?null:c.hasError("required")),m(5),s("ngIf",(R=o.form.get("code"))==null?null:R.hasError("required")),m(5),s("value",!0),m(2),s("value",!1),m(3),s("disabled",o.form.invalid||o.loading),m(4),s("disabled",o.loading),m(2),s("ngIf",o.error)}},dependencies:[j,V,Z,K,G,z,J,X,Q,W,y,E,I,at,nt,et,it,ot,rt,B,S,x,M,Ct,kt,U],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return t})();var de=[{path:"",component:Mt},{path:"new",component:L},{path:":id/edit",component:L}];export{de as banksRoutes};
