import{a as ft,b as _t,c as ht,d as Ct,e as vt,f as gt,g as xt,h as Mt,i as Pt,j as St,k as bt,l as Et,m as yt}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as lt,b as ct,e as dt,f as pt,g as ut,h as st}from"./chunk-ZMTNKF2C.js";import{a as W,b as g,d as X,e as Y,h as Z,i as tt,j as et,k as it,m as rt,n as ot,o as nt,q as at,r as E,s as mt,t as y}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as S,b}from"./chunk-M4UNVSQS.js";import{a as I,b as w,e as T}from"./chunk-KT3WS7J5.js";import{a as J,ba as Q,g as K,i as P}from"./chunk-HS7PEKAI.js";import{Bb as _,Db as v,Lb as o,Mb as f,Nb as j,Ra as m,Sa as u,Sb as M,Tb as H,Ub as B,X as O,aa as V,ga as x,hb as d,jb as c,oa as F,pa as L,sb as r,tb as i,ub as s,uc as U,vb as h,wb as C,yb as $,yc as G,zc as z}from"./chunk-Y5R3IJQL.js";import{a as A}from"./chunk-CWTPBX7D.js";var D=(()=>{class t{constructor(e){this.http=e,this.apiUrl="http://localhost:8082/api/products"}getProducts(){return this.http.get(this.apiUrl)}getProduct(e){return this.http.get(`${this.apiUrl}/${e}`)}createProduct(e){return this.http.post(this.apiUrl,e)}updateProduct(e,n){return this.http.put(`${this.apiUrl}/${e}`,n)}deleteProduct(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(n){return new(n||t)(V(J))}}static{this.\u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Nt(t,l){t&1&&(r(0,"th",13),o(1,"Nombre"),i())}function kt(t,l){if(t&1&&(r(0,"td",14),o(1),i()),t&2){let e=l.$implicit;m(),f(e.name)}}function qt(t,l){t&1&&(r(0,"th",13),o(1,"C\xF3digo"),i())}function At(t,l){if(t&1&&(r(0,"td",14),o(1),i()),t&2){let e=l.$implicit;m(),f(e.code)}}function Ot(t,l){t&1&&(r(0,"th",13),o(1,"Precio"),i())}function Vt(t,l){if(t&1&&(r(0,"td",14),o(1),H(2,"currency"),i()),t&2){let e=l.$implicit;m(),f(B(2,1,e.price))}}function $t(t,l){t&1&&(r(0,"th",13),o(1,"Activo"),i())}function jt(t,l){if(t&1&&(r(0,"td",14)(1,"mat-icon",15),o(2),i()()),t&2){let e=l.$implicit;m(2),f(e.isActive?"check_circle":"cancel")}}function Ht(t,l){t&1&&(r(0,"th",13),o(1,"Acciones"),i())}function Bt(t,l){if(t&1){let e=$();r(0,"td",14)(1,"button",16),_("click",function(){let a=F(e).$implicit,p=v();return L(p.editProduct(a))}),r(2,"mat-icon"),o(3,"edit"),i()(),r(4,"button",17),_("click",function(){let a=F(e).$implicit,p=v();return L(p.deleteProduct(a))}),r(5,"mat-icon"),o(6,"delete"),i()()()}}function Ut(t,l){t&1&&s(0,"tr",18)}function Gt(t,l){t&1&&s(0,"tr",19)}var Tt=(()=>{class t{constructor(e,n){this.productService=e,this.router=n,this.products=[],this.displayedColumns=["name","code","price","isActive","actions"]}ngOnInit(){this.loadProducts()}loadProducts(){this.productService.getProducts().subscribe(e=>this.products=e)}addProduct(){this.router.navigate(["products","new"])}editProduct(e){this.router.navigate(["products",e.id,"edit"])}deleteProduct(e){confirm("\xBFSeguro que deseas eliminar este producto?")&&this.productService.deleteProduct(e.id).subscribe(()=>this.loadProducts())}static{this.\u0275fac=function(n){return new(n||t)(u(D),u(P))}}static{this.\u0275cmp=x({type:t,selectors:[["app-product-list"]],standalone:!0,features:[M],decls:29,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","code"],["matColumnDef","price"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,a){n&1&&(r(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),o(3,"inventory_2"),i(),o(4," Productos "),s(5,"span",0),r(6,"button",1),_("click",function(){return a.addProduct()}),r(7,"mat-icon"),o(8,"add"),i(),o(9," Nuevo "),i()(),r(10,"div",2)(11,"table",3),h(12,4),d(13,Nt,2,0,"th",5)(14,kt,2,1,"td",6),C(),h(15,7),d(16,qt,2,0,"th",5)(17,At,2,1,"td",6),C(),h(18,8),d(19,Ot,2,0,"th",5)(20,Vt,3,3,"td",6),C(),h(21,9),d(22,$t,2,0,"th",5)(23,jt,3,1,"td",6),C(),h(24,10),d(25,Ht,2,0,"th",5)(26,Bt,7,0,"td",6),C(),d(27,Ut,1,0,"tr",11)(28,Gt,1,0,"tr",12),i()()()),n&2&&(m(11),c("dataSource",a.products),m(16),c("matHeaderRowDef",a.displayedColumns),m(),c("matRowDefColumns",a.displayedColumns))},dependencies:[bt,ft,ht,xt,Ct,_t,Mt,vt,gt,Pt,St,T,I,w,b,S,y,E,mt,G],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return t})();function zt(t,l){t&1&&(r(0,"mat-error"),o(1,"Requerido"),i())}function Jt(t,l){t&1&&(r(0,"mat-error"),o(1,"Requerido"),i())}function Kt(t,l){t&1&&(r(0,"mat-error"),o(1,"Requerido"),i())}function Qt(t,l){t&1&&(r(0,"mat-error"),o(1,"Debe ser mayor o igual a 0"),i())}function Wt(t,l){if(t&1&&(r(0,"mat-error"),o(1),i()),t&2){let e=v();m(),f(e.error)}}var R=(()=>{class t{constructor(e,n,a,p){this.fb=e,this.productService=n,this.route=a,this.router=p,this.isEdit=!1,this.productId=null,this.loading=!1,this.error=null,this.form=this.fb.group({name:["",[g.required]],code:["",[g.required]],price:[0,[g.required,g.min(0)]],isActive:[!0]})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?(this.isEdit=!0,this.productId=+e,this.loading=!0,this.productService.getProduct(this.productId).subscribe({next:n=>{this.form.patchValue({name:n.name,code:n.code,price:n.price,isActive:n.isActive}),this.loading=!1},error:n=>{this.error="No se pudo cargar el producto",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let e=A({},this.form.value);this.isEdit&&this.productId?this.productService.updateProduct(this.productId,e).subscribe({next:()=>this.router.navigate(["/products"]),error:n=>{this.error="Error al actualizar producto",this.loading=!1}}):this.productService.createProduct(e).subscribe({next:()=>this.router.navigate(["/products"]),error:n=>{this.error="Error al crear producto",this.loading=!1}})}cancel(){this.router.navigate(["/products"])}static{this.\u0275fac=function(n){return new(n||t)(u(nt),u(D),u(K),u(P))}}static{this.\u0275cmp=x({type:t,selectors:[["app-product-form"]],standalone:!0,features:[M],decls:38,vars:12,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","code","required",""],["matInput","","formControlName","price","type","number","required","","min","0"],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(n,a){if(n&1&&(r(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),o(3),i(),o(4),i(),r(5,"form",0),_("ngSubmit",function(){return a.save()}),r(6,"mat-form-field",1)(7,"mat-label"),o(8,"Nombre"),i(),s(9,"input",2),d(10,zt,2,0,"mat-error",3),i(),r(11,"mat-form-field",1)(12,"mat-label"),o(13,"C\xF3digo"),i(),s(14,"input",4),d(15,Jt,2,0,"mat-error",3),i(),r(16,"mat-form-field",1)(17,"mat-label"),o(18,"Precio"),i(),s(19,"input",5),d(20,Kt,2,0,"mat-error",3)(21,Qt,2,0,"mat-error",3),i(),r(22,"mat-form-field",1)(23,"mat-label"),o(24,"Activo"),i(),r(25,"mat-select",6)(26,"mat-option",7),o(27,"S\xED"),i(),r(28,"mat-option",7),o(29,"No"),i()()(),r(30,"div",8)(31,"button",9)(32,"mat-icon"),o(33,"save"),i(),o(34," Guardar "),i(),r(35,"button",10),_("click",function(){return a.cancel()}),o(36,"Cancelar"),i()(),d(37,Wt,2,1,"mat-error",3),i()()),n&2){let p,N,k,q;m(3),f(a.isEdit?"edit":"add"),m(),j(" ",a.isEdit?"Editar producto":"Nuevo producto"," "),m(),c("formGroup",a.form),m(5),c("ngIf",(p=a.form.get("name"))==null?null:p.hasError("required")),m(5),c("ngIf",(N=a.form.get("code"))==null?null:N.hasError("required")),m(5),c("ngIf",(k=a.form.get("price"))==null?null:k.hasError("required")),m(),c("ngIf",(q=a.form.get("price"))==null?null:q.hasError("min")),m(5),c("value",!0),m(2),c("value",!1),m(3),c("disabled",a.form.invalid||a.loading),m(4),c("disabled",a.loading),m(2),c("ngIf",a.error)}},dependencies:[z,U,at,Z,W,tt,X,Y,ot,rt,et,it,T,I,w,pt,dt,lt,ct,st,ut,y,E,b,S,yt,Et,Q],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return t})();var Se=[{path:"",component:Tt},{path:"new",component:R},{path:":id/edit",component:R}];export{Se as productsRoutes};
