import{a as ue,b as he,c as fe,d as ge,e as Ce,f as _e,g as Re,h as ve,i as be,j as Me,k as xe,l as Se,m as Ee}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as se,b as me,e as le,f as ce,g as de,h as pe}from"./chunk-ZMTNKF2C.js";import{a as K,b as E,d as W,e as X,h as Y,i as Z,j as ee,k as te,m as ie,n as re,o as ae,q as ne,r as y,s as oe,t as I}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as x,b as S}from"./chunk-M4UNVSQS.js";import{a as w,b as T,e as D}from"./chunk-KT3WS7J5.js";import{a as z,ba as J,g as Q,i as M}from"./chunk-HS7PEKAI.js";import{Bb as h,Db as _,Lb as a,Mb as f,Nb as q,Ra as s,Sa as p,Sb as v,Tb as H,Vb as B,X as V,aa as P,ga as R,hb as d,jb as l,oa as L,pa as N,sb as r,tb as i,ub as u,uc as G,vb as g,wb as C,yb as $,yc as U,zc as b}from"./chunk-Y5R3IJQL.js";import{a as O}from"./chunk-CWTPBX7D.js";var F=(()=>{class e{constructor(t){this.http=t,this.apiUrl="http://localhost:8082/api/cash-registers"}getCashRegisters(){return this.http.get(this.apiUrl)}getCashRegister(t){return this.http.get(`${this.apiUrl}/${t}`)}createCashRegister(t){return this.http.post(this.apiUrl,t)}updateCashRegister(t,n){return this.http.put(`${this.apiUrl}/${t}`,n)}deleteCashRegister(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(n){return new(n||e)(P(z))}}static{this.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function je(e,m){e&1&&(r(0,"th",12),a(1,"Nombre"),i())}function ke(e,m){if(e&1&&(r(0,"td",13),a(1),i()),e&2){let t=m.$implicit;s(),f(t.name)}}function Ae(e,m){e&1&&(r(0,"th",12),a(1,"Saldo"),i())}function Oe(e,m){if(e&1&&(r(0,"td",13),a(1),H(2,"currency"),i()),e&2){let t=m.$implicit;s(),f(B(2,1,t.balance,"GTQ"))}}function Ve(e,m){e&1&&(r(0,"th",12),a(1,"Activo"),i())}function Pe(e,m){if(e&1&&(r(0,"td",13)(1,"mat-icon",14),a(2),i()()),e&2){let t=m.$implicit;s(2),f(t.isActive?"check_circle":"cancel")}}function $e(e,m){e&1&&(r(0,"th",12),a(1,"Acciones"),i())}function qe(e,m){if(e&1){let t=$();r(0,"td",13)(1,"button",15),h("click",function(){let o=L(t).$implicit,c=_();return N(c.editCashRegister(o))}),r(2,"mat-icon"),a(3,"edit"),i()(),r(4,"button",16),h("click",function(){let o=L(t).$implicit,c=_();return N(c.deleteCashRegister(o))}),r(5,"mat-icon"),a(6,"delete"),i()()()}}function He(e,m){e&1&&u(0,"tr",17)}function Be(e,m){e&1&&u(0,"tr",18)}var we=(()=>{class e{constructor(t,n){this.cashRegisterService=t,this.router=n,this.cashRegisters=[],this.displayedColumns=["name","balance","isActive","actions"]}ngOnInit(){this.loadCashRegisters()}loadCashRegisters(){this.cashRegisterService.getCashRegisters().subscribe(t=>this.cashRegisters=t)}addCashRegister(){this.router.navigate(["cash-registers","nuevo"])}editCashRegister(t){this.router.navigate(["cash-registers","editar",t.id])}deleteCashRegister(t){confirm("\xBFSeguro que deseas eliminar esta caja chica?")&&this.cashRegisterService.deleteCashRegister(t.id).subscribe(()=>this.loadCashRegisters())}static{this.\u0275fac=function(n){return new(n||e)(p(F),p(M))}}static{this.\u0275cmp=R({type:e,selectors:[["app-cash-register-list"]],standalone:!0,features:[v],decls:26,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","balance"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){n&1&&(r(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),a(3,"point_of_sale"),i(),a(4," Caja chica "),u(5,"span",0),r(6,"button",1),h("click",function(){return o.addCashRegister()}),r(7,"mat-icon"),a(8,"add"),i(),a(9," Nuevo "),i()(),r(10,"div",2)(11,"table",3),g(12,4),d(13,je,2,0,"th",5)(14,ke,2,1,"td",6),C(),g(15,7),d(16,Ae,2,0,"th",5)(17,Oe,3,4,"td",6),C(),g(18,8),d(19,Ve,2,0,"th",5)(20,Pe,3,1,"td",6),C(),g(21,9),d(22,$e,2,0,"th",5)(23,qe,7,0,"td",6),C(),d(24,He,1,0,"tr",10)(25,Be,1,0,"tr",11),i()()()),n&2&&(s(11),l("dataSource",o.cashRegisters),s(13),l("matHeaderRowDef",o.displayedColumns),s(),l("matRowDefColumns",o.displayedColumns))},dependencies:[b,U,xe,ue,fe,Re,ge,he,ve,Ce,_e,be,Me,D,w,T,S,x,I,y,oe],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return e})();function Ge(e,m){e&1&&(r(0,"mat-error"),a(1,"Requerido"),i())}function Ue(e,m){e&1&&(r(0,"mat-error"),a(1,"Requerido"),i())}function ze(e,m){e&1&&(r(0,"mat-error"),a(1,"No puede ser negativo"),i())}function Qe(e,m){if(e&1&&(r(0,"mat-error"),a(1),i()),e&2){let t=_();s(),f(t.error)}}var j=(()=>{class e{constructor(t,n,o,c){this.fb=t,this.cashRegisterService=n,this.route=o,this.router=c,this.isEdit=!1,this.cashRegisterId=null,this.loading=!1,this.error=null,this.form=this.fb.group({name:["",[E.required]],balance:[0,[E.required,E.min(0)]],isActive:[!0]})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?(this.isEdit=!0,this.cashRegisterId=+t,this.loading=!0,this.cashRegisterService.getCashRegister(this.cashRegisterId).subscribe({next:n=>{this.form.patchValue({name:n.name,balance:n.balance,isActive:n.isActive}),this.loading=!1},error:n=>{this.error="No se pudo cargar la caja chica",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let t=O({},this.form.value);this.isEdit&&this.cashRegisterId?this.cashRegisterService.updateCashRegister(this.cashRegisterId,t).subscribe({next:()=>this.router.navigate(["/cash-registers"]),error:n=>{this.error="Error al actualizar caja chica",this.loading=!1}}):this.cashRegisterService.createCashRegister(t).subscribe({next:()=>this.router.navigate(["/cash-registers"]),error:n=>{this.error="Error al crear caja chica",this.loading=!1}})}cancel(){this.router.navigate(["/cash-registers"])}static{this.\u0275fac=function(n){return new(n||e)(p(ae),p(F),p(Q),p(M))}}static{this.\u0275cmp=R({type:e,selectors:[["app-cash-register-form"]],standalone:!0,features:[v],decls:33,vars:11,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","type","number","formControlName","balance","required","","min","0"],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(n,o){if(n&1&&(r(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),a(3),i(),a(4),i(),r(5,"form",0),h("ngSubmit",function(){return o.save()}),r(6,"mat-form-field",1)(7,"mat-label"),a(8,"Nombre"),i(),u(9,"input",2),d(10,Ge,2,0,"mat-error",3),i(),r(11,"mat-form-field",1)(12,"mat-label"),a(13,"Saldo"),i(),u(14,"input",4),d(15,Ue,2,0,"mat-error",3)(16,ze,2,0,"mat-error",3),i(),r(17,"mat-form-field",1)(18,"mat-label"),a(19,"Activo"),i(),r(20,"mat-select",5)(21,"mat-option",6),a(22,"S\xED"),i(),r(23,"mat-option",6),a(24,"No"),i()()(),r(25,"div",7)(26,"button",8)(27,"mat-icon"),a(28,"save"),i(),a(29," Guardar "),i(),r(30,"button",9),h("click",function(){return o.cancel()}),a(31,"Cancelar"),i()(),d(32,Qe,2,1,"mat-error",3),i()()),n&2){let c,k,A;s(3),f(o.isEdit?"edit":"add"),s(),q(" ",o.isEdit?"Editar caja chica":"Nueva caja chica"," "),s(),l("formGroup",o.form),s(5),l("ngIf",(c=o.form.get("name"))==null?null:c.hasError("required")),s(5),l("ngIf",(k=o.form.get("balance"))==null?null:k.hasError("required")),s(),l("ngIf",(A=o.form.get("balance"))==null?null:A.hasError("min")),s(5),l("value",!0),s(2),l("value",!1),s(3),l("disabled",o.form.invalid||o.loading),s(4),l("disabled",o.loading),s(2),l("ngIf",o.error)}},dependencies:[b,G,ne,Y,K,Z,W,X,re,ie,ee,te,D,w,T,ce,le,se,me,pe,de,I,y,S,x,Ee,Se,J],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return e})();var vt=[{path:"",component:we},{path:"nuevo",component:j},{path:"editar/:id",component:j}];export{vt as cashRegistersRoutes};
