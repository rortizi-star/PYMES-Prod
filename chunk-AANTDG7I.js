import{a as _e,b as he,c as Ce,d as Ie,e as ge,f as xe,g as Se,h as Me,i as be,j as Ee,k as ye,l as Te,m as we}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as se,b as de,e as pe,f as ue,g as fe,h as ve}from"./chunk-ZMTNKF2C.js";import{a as Y,b as C,d as Z,e as ee,h as te,i as ie,j as ne,k as oe,m as re,n as ae,o as me,q as le,r as y,s as ce,t as T}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as b,b as E}from"./chunk-M4UNVSQS.js";import{a as w,b as D,e as F}from"./chunk-KT3WS7J5.js";import{a as K,ba as X,g as W,i as M}from"./chunk-HS7PEKAI.js";import{Bb as h,Db as I,Lb as o,Mb as u,Nb as U,Ra as l,Sa as f,Sb as x,Tb as q,Vb as k,X as B,aa as H,ga as g,hb as s,jb as c,oa as N,pa as R,sb as n,tb as i,ub as p,uc as z,vb as v,wb as _,wc as Q,yb as G,yc as J,zc as S}from"./chunk-Y5R3IJQL.js";import{a as j}from"./chunk-CWTPBX7D.js";var L=(()=>{class e{constructor(t){this.http=t,this.apiUrl="http://localhost:8082/api/invoices"}getInvoices(){return this.http.get(this.apiUrl)}getInvoice(t){return this.http.get(`${this.apiUrl}/${t}`)}createInvoice(t){return this.http.post(this.apiUrl,t)}updateInvoice(t,r){return this.http.put(`${this.apiUrl}/${t}`,r)}deleteInvoice(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(r){return new(r||e)(H(K))}}static{this.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Pe(e,m){e&1&&(n(0,"th",14),o(1,"No. Factura"),i())}function $e(e,m){if(e&1&&(n(0,"td",15),o(1),i()),e&2){let t=m.$implicit;l(),u(t.number)}}function Oe(e,m){e&1&&(n(0,"th",14),o(1,"Fecha"),i())}function Ve(e,m){if(e&1&&(n(0,"td",15),o(1),q(2,"date"),i()),e&2){let t=m.$implicit;l(),u(k(2,1,t.date,"shortDate"))}}function je(e,m){e&1&&(n(0,"th",14),o(1,"Cliente"),i())}function Be(e,m){if(e&1&&(n(0,"td",15),o(1),i()),e&2){let t=m.$implicit;l(),u(t.customer==null?null:t.customer.name)}}function He(e,m){e&1&&(n(0,"th",14),o(1,"Total"),i())}function Ge(e,m){if(e&1&&(n(0,"td",15),o(1),q(2,"currency"),i()),e&2){let t=m.$implicit;l(),u(k(2,1,t.total,"GTQ"))}}function Ue(e,m){e&1&&(n(0,"th",14),o(1,"Activo"),i())}function ze(e,m){if(e&1&&(n(0,"td",15)(1,"mat-icon",16),o(2),i()()),e&2){let t=m.$implicit;l(2),u(t.isActive?"check_circle":"cancel")}}function Qe(e,m){e&1&&(n(0,"th",14),o(1,"Acciones"),i())}function Je(e,m){if(e&1){let t=G();n(0,"td",15)(1,"button",17),h("click",function(){let a=N(t).$implicit,d=I();return R(d.editInvoice(a))}),n(2,"mat-icon"),o(3,"edit"),i()(),n(4,"button",18),h("click",function(){let a=N(t).$implicit,d=I();return R(d.deleteInvoice(a))}),n(5,"mat-icon"),o(6,"delete"),i()()()}}function Ke(e,m){e&1&&p(0,"tr",19)}function We(e,m){e&1&&p(0,"tr",20)}var Le=(()=>{class e{constructor(t,r){this.invoiceService=t,this.router=r,this.invoices=[],this.displayedColumns=["number","date","customer","total","isActive","actions"]}ngOnInit(){this.loadInvoices()}loadInvoices(){this.invoiceService.getInvoices().subscribe(t=>this.invoices=t)}addInvoice(){this.router.navigate(["invoices","nuevo"])}editInvoice(t){this.router.navigate(["invoices","editar",t.id])}deleteInvoice(t){confirm("\xBFSeguro que deseas eliminar esta factura?")&&this.invoiceService.deleteInvoice(t.id).subscribe(()=>this.loadInvoices())}static{this.\u0275fac=function(r){return new(r||e)(f(L),f(M))}}static{this.\u0275cmp=g({type:e,selectors:[["app-invoice-list"]],standalone:!0,features:[x],decls:32,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","number"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","customer"],["matColumnDef","total"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(r,a){r&1&&(n(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),o(3,"receipt_long"),i(),o(4," Facturas "),p(5,"span",0),n(6,"button",1),h("click",function(){return a.addInvoice()}),n(7,"mat-icon"),o(8,"add"),i(),o(9," Nueva "),i()(),n(10,"div",2)(11,"table",3),v(12,4),s(13,Pe,2,0,"th",5)(14,$e,2,1,"td",6),_(),v(15,7),s(16,Oe,2,0,"th",5)(17,Ve,3,4,"td",6),_(),v(18,8),s(19,je,2,0,"th",5)(20,Be,2,1,"td",6),_(),v(21,9),s(22,He,2,0,"th",5)(23,Ge,3,4,"td",6),_(),v(24,10),s(25,Ue,2,0,"th",5)(26,ze,3,1,"td",6),_(),v(27,11),s(28,Qe,2,0,"th",5)(29,Je,7,0,"td",6),_(),s(30,Ke,1,0,"tr",12)(31,We,1,0,"tr",13),i()()()),r&2&&(l(11),c("dataSource",a.invoices),l(19),c("matHeaderRowDef",a.displayedColumns),l(),c("matRowDefColumns",a.displayedColumns))},dependencies:[S,J,Q,ye,_e,Ce,Se,Ie,he,Me,ge,xe,be,Ee,F,w,D,E,b,T,y,ce],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return e})();function Xe(e,m){e&1&&(n(0,"mat-error"),o(1,"Requerido"),i())}function Ye(e,m){e&1&&(n(0,"mat-error"),o(1,"Requerido"),i())}function Ze(e,m){e&1&&(n(0,"mat-error"),o(1,"Requerido"),i())}function et(e,m){e&1&&(n(0,"mat-error"),o(1,"Requerido"),i())}function tt(e,m){e&1&&(n(0,"mat-error"),o(1,"No puede ser negativo"),i())}function it(e,m){if(e&1&&(n(0,"mat-error"),o(1),i()),e&2){let t=I();l(),u(t.error)}}var A=(()=>{class e{constructor(t,r,a,d){this.fb=t,this.invoiceService=r,this.route=a,this.router=d,this.isEdit=!1,this.invoiceId=null,this.loading=!1,this.error=null,this.form=this.fb.group({number:["",[C.required]],date:["",[C.required]],customer:["",[C.required]],total:[0,[C.required,C.min(0)]],isActive:[!0]})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?(this.isEdit=!0,this.invoiceId=+t,this.loading=!0,this.invoiceService.getInvoice(this.invoiceId).subscribe({next:r=>{this.form.patchValue({number:r.number,date:r.date,customer:r.customer,total:r.total,isActive:r.isActive}),this.loading=!1},error:r=>{this.error="No se pudo cargar la factura",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let t=j({},this.form.value);this.isEdit&&this.invoiceId?this.invoiceService.updateInvoice(this.invoiceId,t).subscribe({next:()=>this.router.navigate(["/invoices"]),error:r=>{this.error="Error al actualizar factura",this.loading=!1}}):this.invoiceService.createInvoice(t).subscribe({next:()=>this.router.navigate(["/invoices"]),error:r=>{this.error="Error al crear factura",this.loading=!1}})}cancel(){this.router.navigate(["/invoices"])}static{this.\u0275fac=function(r){return new(r||e)(f(me),f(L),f(W),f(M))}}static{this.\u0275cmp=g({type:e,selectors:[["app-invoice-form"]],standalone:!0,features:[x],decls:43,vars:13,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","number","required",""],[4,"ngIf"],["matInput","","type","date","formControlName","date","required",""],["matInput","","formControlName","customer","required",""],["matInput","","type","number","formControlName","total","required","","min","0"],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(r,a){if(r&1&&(n(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),o(3),i(),o(4),i(),n(5,"form",0),h("ngSubmit",function(){return a.save()}),n(6,"mat-form-field",1)(7,"mat-label"),o(8,"No. Factura"),i(),p(9,"input",2),s(10,Xe,2,0,"mat-error",3),i(),n(11,"mat-form-field",1)(12,"mat-label"),o(13,"Fecha"),i(),p(14,"input",4),s(15,Ye,2,0,"mat-error",3),i(),n(16,"mat-form-field",1)(17,"mat-label"),o(18,"Cliente"),i(),p(19,"input",5),s(20,Ze,2,0,"mat-error",3),i(),n(21,"mat-form-field",1)(22,"mat-label"),o(23,"Total"),i(),p(24,"input",6),s(25,et,2,0,"mat-error",3)(26,tt,2,0,"mat-error",3),i(),n(27,"mat-form-field",1)(28,"mat-label"),o(29,"Activo"),i(),n(30,"mat-select",7)(31,"mat-option",8),o(32,"S\xED"),i(),n(33,"mat-option",8),o(34,"No"),i()()(),n(35,"div",9)(36,"button",10)(37,"mat-icon"),o(38,"save"),i(),o(39," Guardar "),i(),n(40,"button",11),h("click",function(){return a.cancel()}),o(41,"Cancelar"),i()(),s(42,it,2,1,"mat-error",3),i()()),r&2){let d,P,$,O,V;l(3),u(a.isEdit?"edit":"add"),l(),U(" ",a.isEdit?"Editar factura":"Nueva factura"," "),l(),c("formGroup",a.form),l(5),c("ngIf",(d=a.form.get("number"))==null?null:d.hasError("required")),l(5),c("ngIf",(P=a.form.get("date"))==null?null:P.hasError("required")),l(5),c("ngIf",($=a.form.get("customer"))==null?null:$.hasError("required")),l(5),c("ngIf",(O=a.form.get("total"))==null?null:O.hasError("required")),l(),c("ngIf",(V=a.form.get("total"))==null?null:V.hasError("min")),l(5),c("value",!0),l(2),c("value",!1),l(3),c("disabled",a.form.invalid||a.loading),l(4),c("disabled",a.loading),l(2),c("ngIf",a.error)}},dependencies:[S,z,le,te,Y,ie,Z,ee,ae,re,ne,oe,F,w,D,ue,pe,se,de,ve,fe,T,y,E,b,we,Te,X],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return e})();var Ft=[{path:"",component:Le},{path:"nuevo",component:A},{path:"editar/:id",component:A}];export{Ft as invoicesRoutes};
