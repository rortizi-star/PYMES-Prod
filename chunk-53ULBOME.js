import{a as le,b as me,c as se,d as ce,e as de,f as pe,g as ue,h as fe,i as he,j as _e,k as Ce,l as ve,m as ge}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as te,b as ie,e as oe,f as re,g as ne,h as ae}from"./chunk-ZMTNKF2C.js";import{a as G,b as L,d as z,e as J,h as K,j as Q,k as W,n as X,o as Y,q as Z,r as b,s as ee,t as E}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as x,b as S}from"./chunk-M4UNVSQS.js";import{a as I,b as y,e as w}from"./chunk-KT3WS7J5.js";import{a as H,ba as U,g as B,i as M}from"./chunk-HS7PEKAI.js";import{Bb as f,Db as v,Lb as r,Mb as h,Nb as V,Ra as l,Sa as p,Sb as R,X as O,aa as $,ga as g,hb as d,jb as s,oa as T,pa as F,sb as o,tb as i,ub as u,uc as j,vb as _,wb as C,yb as q,zc as P}from"./chunk-Y5R3IJQL.js";import{a as A}from"./chunk-CWTPBX7D.js";var D=(()=>{class e{constructor(t){this.http=t,this.apiUrl="http://localhost:8082/api/roles"}getRoles(){return this.http.get(this.apiUrl)}getRole(t){return this.http.get(`${this.apiUrl}/${t}`)}createRole(t){return this.http.post(this.apiUrl,t)}updateRole(t,n){return this.http.put(`${this.apiUrl}/${t}`,n)}deleteRole(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(n){return new(n||e)($(H))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ye(e,m){e&1&&(o(0,"th",12),r(1,"Nombre"),i())}function we(e,m){if(e&1&&(o(0,"td",13),r(1),i()),e&2){let t=m.$implicit;l(),h(t.name)}}function De(e,m){e&1&&(o(0,"th",12),r(1,"Descripci\xF3n"),i())}function Te(e,m){if(e&1&&(o(0,"td",13),r(1),i()),e&2){let t=m.$implicit;l(),h(t.description)}}function Fe(e,m){e&1&&(o(0,"th",12),r(1,"Activo"),i())}function Le(e,m){if(e&1&&(o(0,"td",13)(1,"mat-icon",14),r(2),i()()),e&2){let t=m.$implicit;l(2),h(t.isActive?"check_circle":"cancel")}}function Ne(e,m){e&1&&(o(0,"th",12),r(1,"Acciones"),i())}function ke(e,m){if(e&1){let t=q();o(0,"td",13)(1,"button",15),f("click",function(){let a=T(t).$implicit,c=v();return F(c.editRole(a))}),o(2,"mat-icon"),r(3,"edit"),i()(),o(4,"button",16),f("click",function(){let a=T(t).$implicit,c=v();return F(c.deleteRole(a))}),o(5,"mat-icon"),r(6,"delete"),i()()()}}function Ae(e,m){e&1&&u(0,"tr",17)}function Oe(e,m){e&1&&u(0,"tr",18)}var xe=(()=>{class e{constructor(t,n){this.roleService=t,this.router=n,this.roles=[],this.displayedColumns=["name","description","isActive","actions"]}ngOnInit(){this.loadRoles()}loadRoles(){this.roleService.getRoles().subscribe(t=>this.roles=t)}addRole(){this.router.navigate(["roles","nuevo"])}editRole(t){this.router.navigate(["roles","editar",t.id])}deleteRole(t){confirm("\xBFSeguro que deseas eliminar este rol?")&&this.roleService.deleteRole(t.id).subscribe(()=>this.loadRoles())}static{this.\u0275fac=function(n){return new(n||e)(p(D),p(M))}}static{this.\u0275cmp=g({type:e,selectors:[["app-role-list"]],standalone:!0,features:[R],decls:26,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,a){n&1&&(o(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),r(3,"security"),i(),r(4," Roles "),u(5,"span",0),o(6,"button",1),f("click",function(){return a.addRole()}),o(7,"mat-icon"),r(8,"add"),i(),r(9," Nuevo "),i()(),o(10,"div",2)(11,"table",3),_(12,4),d(13,ye,2,0,"th",5)(14,we,2,1,"td",6),C(),_(15,7),d(16,De,2,0,"th",5)(17,Te,2,1,"td",6),C(),_(18,8),d(19,Fe,2,0,"th",5)(20,Le,3,1,"td",6),C(),_(21,9),d(22,Ne,2,0,"th",5)(23,ke,7,0,"td",6),C(),d(24,Ae,1,0,"tr",10)(25,Oe,1,0,"tr",11),i()()()),n&2&&(l(11),s("dataSource",a.roles),l(13),s("matHeaderRowDef",a.displayedColumns),l(),s("matRowDefColumns",a.displayedColumns))},dependencies:[Ce,le,se,ue,ce,me,fe,de,pe,he,_e,w,I,y,S,x,E,b,ee],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return e})();function $e(e,m){e&1&&(o(0,"mat-error"),r(1,"Requerido"),i())}function qe(e,m){e&1&&(o(0,"mat-error"),r(1,"Requerido"),i())}function Ve(e,m){if(e&1&&(o(0,"mat-error"),r(1),i()),e&2){let t=v();l(),h(t.error)}}var N=(()=>{class e{constructor(t,n,a,c){this.fb=t,this.roleService=n,this.route=a,this.router=c,this.isEdit=!1,this.roleId=null,this.loading=!1,this.error=null,this.form=this.fb.group({name:["",[L.required]],description:["",[L.required]],isActive:[!0]})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?(this.isEdit=!0,this.roleId=+t,this.loading=!0,this.roleService.getRole(this.roleId).subscribe({next:n=>{this.form.patchValue({name:n.name,description:n.description,isActive:n.isActive}),this.loading=!1},error:n=>{this.error="No se pudo cargar el rol",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let t=A({},this.form.value);this.isEdit&&this.roleId?this.roleService.updateRole(this.roleId,t).subscribe({next:()=>this.router.navigate(["/roles"]),error:n=>{this.error="Error al actualizar rol",this.loading=!1}}):this.roleService.createRole(t).subscribe({next:()=>this.router.navigate(["/roles"]),error:n=>{this.error="Error al crear rol",this.loading=!1}})}cancel(){this.router.navigate(["/roles"])}static{this.\u0275fac=function(n){return new(n||e)(p(Y),p(D),p(B),p(M))}}static{this.\u0275cmp=g({type:e,selectors:[["app-role-form"]],standalone:!0,features:[R],decls:32,vars:10,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","description","required",""],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(n,a){if(n&1&&(o(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),r(3),i(),r(4),i(),o(5,"form",0),f("ngSubmit",function(){return a.save()}),o(6,"mat-form-field",1)(7,"mat-label"),r(8,"Nombre"),i(),u(9,"input",2),d(10,$e,2,0,"mat-error",3),i(),o(11,"mat-form-field",1)(12,"mat-label"),r(13,"Descripci\xF3n"),i(),u(14,"input",4),d(15,qe,2,0,"mat-error",3),i(),o(16,"mat-form-field",1)(17,"mat-label"),r(18,"Activo"),i(),o(19,"mat-select",5)(20,"mat-option",6),r(21,"S\xED"),i(),o(22,"mat-option",6),r(23,"No"),i()()(),o(24,"div",7)(25,"button",8)(26,"mat-icon"),r(27,"save"),i(),r(28," Guardar "),i(),o(29,"button",9),f("click",function(){return a.cancel()}),r(30,"Cancelar"),i()(),d(31,Ve,2,1,"mat-error",3),i()()),n&2){let c,k;l(3),h(a.isEdit?"edit":"add"),l(),V(" ",a.isEdit?"Editar rol":"Nuevo rol"," "),l(),s("formGroup",a.form),l(5),s("ngIf",(c=a.form.get("name"))==null?null:c.hasError("required")),l(5),s("ngIf",(k=a.form.get("description"))==null?null:k.hasError("required")),l(5),s("value",!0),l(2),s("value",!1),l(3),s("disabled",a.form.invalid||a.loading),l(4),s("disabled",a.loading),l(2),s("ngIf",a.error)}},dependencies:[P,j,Z,K,G,z,J,X,Q,W,w,I,y,re,oe,te,ie,ae,ne,E,b,S,x,ge,ve,U],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return e})();var dt=[{path:"",component:xe},{path:"nuevo",component:N},{path:"editar/:id",component:N}];export{dt as rolesRoutes};
