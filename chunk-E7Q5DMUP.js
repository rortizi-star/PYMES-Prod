import{a as me,b as pe,c as se,d as ue,e as ce,f as de,g as fe,h as he,i as Se,j as _e,k as Ce,l as ve,m as ge}from"./chunk-AWLMKVGE.js";import"./chunk-LJLSRGT3.js";import{a as ie,b as re,e as ne,f as oe,g as ae,h as le}from"./chunk-ZMTNKF2C.js";import{a as z,b,d as J,e as K,h as Q,j as W,k as X,n as Y,o as Z,q as ee,r as I,s as te,t as y}from"./chunk-JLC34J6X.js";import"./chunk-Q64FFBLU.js";import{a as M,b as E}from"./chunk-M4UNVSQS.js";import{a as w,b as T,e as D}from"./chunk-KT3WS7J5.js";import{a as B,ba as G,g as U,i as x}from"./chunk-HS7PEKAI.js";import{Bb as h,Db as C,Lb as n,Mb as f,Nb as V,Ra as l,Sa as c,Sb as g,X as O,aa as $,ga as v,hb as s,jb as p,oa as L,pa as R,sb as r,tb as i,ub as d,uc as j,vb as S,wb as _,yb as P,zc as H}from"./chunk-Y5R3IJQL.js";import{a as A}from"./chunk-CWTPBX7D.js";var F=(()=>{class e{constructor(t){this.http=t,this.apiUrl="http://localhost:8082/api/suppliers"}getSuppliers(){return this.http.get(this.apiUrl)}getSupplier(t){return this.http.get(`${this.apiUrl}/${t}`)}createSupplier(t){return this.http.post(this.apiUrl,t)}updateSupplier(t,o){return this.http.put(`${this.apiUrl}/${t}`,o)}deleteSupplier(t){return this.http.delete(`${this.apiUrl}/${t}`)}static{this.\u0275fac=function(o){return new(o||e)($(B))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Te(e,m){e&1&&(r(0,"th",13),n(1,"Nombre"),i())}function De(e,m){if(e&1&&(r(0,"td",14),n(1),i()),e&2){let t=m.$implicit;l(),f(t.name)}}function Fe(e,m){e&1&&(r(0,"th",13),n(1,"Contacto"),i())}function Le(e,m){if(e&1&&(r(0,"td",14),n(1),i()),e&2){let t=m.$implicit;l(),f(t.contact)}}function Re(e,m){e&1&&(r(0,"th",13),n(1,"Tel\xE9fono"),i())}function Ne(e,m){if(e&1&&(r(0,"td",14),n(1),i()),e&2){let t=m.$implicit;l(),f(t.phone)}}function ke(e,m){e&1&&(r(0,"th",13),n(1,"Activo"),i())}function qe(e,m){if(e&1&&(r(0,"td",14)(1,"mat-icon",15),n(2),i()()),e&2){let t=m.$implicit;l(2),f(t.isActive?"check_circle":"cancel")}}function Ae(e,m){e&1&&(r(0,"th",13),n(1,"Acciones"),i())}function Oe(e,m){if(e&1){let t=P();r(0,"td",14)(1,"button",16),h("click",function(){let a=L(t).$implicit,u=C();return R(u.editSupplier(a))}),r(2,"mat-icon"),n(3,"edit"),i()(),r(4,"button",17),h("click",function(){let a=L(t).$implicit,u=C();return R(u.deleteSupplier(a))}),r(5,"mat-icon"),n(6,"delete"),i()()()}}function $e(e,m){e&1&&d(0,"tr",18)}function Pe(e,m){e&1&&d(0,"tr",19)}var Ee=(()=>{class e{constructor(t,o){this.supplierService=t,this.router=o,this.suppliers=[],this.displayedColumns=["name","contact","phone","isActive","actions"]}ngOnInit(){this.loadSuppliers()}loadSuppliers(){this.supplierService.getSuppliers().subscribe(t=>this.suppliers=t)}addSupplier(){this.router.navigate(["suppliers","nuevo"])}editSupplier(t){this.router.navigate(["suppliers","editar",t.id])}deleteSupplier(t){confirm("\xBFSeguro que deseas eliminar este proveedor?")&&this.supplierService.deleteSupplier(t.id).subscribe(()=>this.loadSuppliers())}static{this.\u0275fac=function(o){return new(o||e)(c(F),c(x))}}static{this.\u0275cmp=v({type:e,selectors:[["app-supplier-list"]],standalone:!0,features:[g],decls:29,vars:3,consts:[[1,"spacer"],["mat-raised-button","","color","primary",3,"click"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","contact"],["matColumnDef","phone"],["matColumnDef","isActive"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,a){o&1&&(r(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),n(3,"local_shipping"),i(),n(4," Proveedores "),d(5,"span",0),r(6,"button",1),h("click",function(){return a.addSupplier()}),r(7,"mat-icon"),n(8,"add"),i(),n(9," Nuevo "),i()(),r(10,"div",2)(11,"table",3),S(12,4),s(13,Te,2,0,"th",5)(14,De,2,1,"td",6),_(),S(15,7),s(16,Fe,2,0,"th",5)(17,Le,2,1,"td",6),_(),S(18,8),s(19,Re,2,0,"th",5)(20,Ne,2,1,"td",6),_(),S(21,9),s(22,ke,2,0,"th",5)(23,qe,3,1,"td",6),_(),S(24,10),s(25,Ae,2,0,"th",5)(26,Oe,7,0,"td",6),_(),s(27,$e,1,0,"tr",11)(28,Pe,1,0,"tr",12),i()()()),o&2&&(l(11),p("dataSource",a.suppliers),l(16),p("matHeaderRowDef",a.displayedColumns),l(),p("matRowDefColumns",a.displayedColumns))},dependencies:[Ce,me,se,fe,ue,pe,he,ce,de,Se,_e,D,w,T,E,M,y,I,te],styles:[".table-container[_ngcontent-%COMP%]{overflow-x:auto;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%;min-width:400px}mat-card[_ngcontent-%COMP%]{margin:2rem auto;max-width:900px}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return e})();function Ve(e,m){e&1&&(r(0,"mat-error"),n(1,"Requerido"),i())}function je(e,m){e&1&&(r(0,"mat-error"),n(1,"Requerido"),i())}function He(e,m){e&1&&(r(0,"mat-error"),n(1,"Requerido"),i())}function Be(e,m){if(e&1&&(r(0,"mat-error"),n(1),i()),e&2){let t=C();l(),f(t.error)}}var N=(()=>{class e{constructor(t,o,a,u){this.fb=t,this.supplierService=o,this.route=a,this.router=u,this.isEdit=!1,this.supplierId=null,this.loading=!1,this.error=null,this.form=this.fb.group({name:["",[b.required]],contact:["",[b.required]],phone:["",[b.required]],isActive:[!0]})}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?(this.isEdit=!0,this.supplierId=+t,this.loading=!0,this.supplierService.getSupplier(this.supplierId).subscribe({next:o=>{this.form.patchValue({name:o.name,contact:o.contact,phone:o.phone,isActive:o.isActive}),this.loading=!1},error:o=>{this.error="No se pudo cargar el proveedor",this.loading=!1}})):this.isEdit=!1}save(){if(this.form.invalid)return;this.loading=!0;let t=A({},this.form.value);this.isEdit&&this.supplierId?this.supplierService.updateSupplier(this.supplierId,t).subscribe({next:()=>this.router.navigate(["/suppliers"]),error:o=>{this.error="Error al actualizar proveedor",this.loading=!1}}):this.supplierService.createSupplier(t).subscribe({next:()=>this.router.navigate(["/suppliers"]),error:o=>{this.error="Error al crear proveedor",this.loading=!1}})}cancel(){this.router.navigate(["/suppliers"])}static{this.\u0275fac=function(o){return new(o||e)(c(Z),c(F),c(U),c(x))}}static{this.\u0275cmp=v({type:e,selectors:[["app-supplier-form"]],standalone:!0,features:[g],decls:37,vars:11,consts:[[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","contact","required",""],["matInput","","formControlName","phone","required",""],["formControlName","isActive"],[3,"value"],[1,"actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click","disabled"]],template:function(o,a){if(o&1&&(r(0,"mat-card")(1,"mat-card-title")(2,"mat-icon"),n(3),i(),n(4),i(),r(5,"form",0),h("ngSubmit",function(){return a.save()}),r(6,"mat-form-field",1)(7,"mat-label"),n(8,"Nombre"),i(),d(9,"input",2),s(10,Ve,2,0,"mat-error",3),i(),r(11,"mat-form-field",1)(12,"mat-label"),n(13,"Contacto"),i(),d(14,"input",4),s(15,je,2,0,"mat-error",3),i(),r(16,"mat-form-field",1)(17,"mat-label"),n(18,"Tel\xE9fono"),i(),d(19,"input",5),s(20,He,2,0,"mat-error",3),i(),r(21,"mat-form-field",1)(22,"mat-label"),n(23,"Activo"),i(),r(24,"mat-select",6)(25,"mat-option",7),n(26,"S\xED"),i(),r(27,"mat-option",7),n(28,"No"),i()()(),r(29,"div",8)(30,"button",9)(31,"mat-icon"),n(32,"save"),i(),n(33," Guardar "),i(),r(34,"button",10),h("click",function(){return a.cancel()}),n(35,"Cancelar"),i()(),s(36,Be,2,1,"mat-error",3),i()()),o&2){let u,k,q;l(3),f(a.isEdit?"edit":"add"),l(),V(" ",a.isEdit?"Editar proveedor":"Nuevo proveedor"," "),l(),p("formGroup",a.form),l(5),p("ngIf",(u=a.form.get("name"))==null?null:u.hasError("required")),l(5),p("ngIf",(k=a.form.get("contact"))==null?null:k.hasError("required")),l(5),p("ngIf",(q=a.form.get("phone"))==null?null:q.hasError("required")),l(5),p("value",!0),l(2),p("value",!1),l(3),p("disabled",a.form.invalid||a.loading),l(4),p("disabled",a.loading),l(2),p("ngIf",a.error)}},dependencies:[H,j,ee,Q,z,J,K,Y,W,X,D,w,T,oe,ne,ie,re,le,ae,y,I,E,M,ge,ve,G],styles:[".full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}mat-card[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.3rem;margin-bottom:1rem}"]})}}return e})();var ht=[{path:"",component:Ee},{path:"nuevo",component:N},{path:"editar/:id",component:N}];export{ht as suppliersRoutes};
